!function(e,t){for(var r in t)e[r]=t[r]}(exports,function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("zlib")},function(e,t){e.exports=require("url")},function(e,t,r){"use strict";r.r(t),r.d(t,"Headers",(function(){return x})),r.d(t,"Request",(function(){return z})),r.d(t,"Response",(function(){return L})),r.d(t,"FetchError",(function(){return d}));var n=r(0),o=r(5),i=r(2),s=r(7),u=r(1);const a=n.Readable,c=Symbol("buffer"),f=Symbol("type");class l{constructor(){this[f]="";const e=arguments[0],t=arguments[1],r=[];let n=0;if(e){const t=e,o=Number(t.length);for(let e=0;e<o;e++){const o=t[e];let i;i=o instanceof Buffer?o:ArrayBuffer.isView(o)?Buffer.from(o.buffer,o.byteOffset,o.byteLength):o instanceof ArrayBuffer?Buffer.from(o):o instanceof l?o[c]:Buffer.from("string"==typeof o?o:String(o)),n+=i.length,r.push(i)}}this[c]=Buffer.concat(r);let o=t&&void 0!==t.type&&String(t.type).toLowerCase();o&&!/[^\u0020-\u007E]/.test(o)&&(this[f]=o)}get size(){return this[c].length}get type(){return this[f]}text(){return Promise.resolve(this[c].toString())}arrayBuffer(){const e=this[c],t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(t)}stream(){const e=new a;return e._read=function(){},e.push(this[c]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,t=arguments[0],r=arguments[1];let n,o;n=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),o=void 0===r?e:r<0?Math.max(e+r,0):Math.min(r,e);const i=Math.max(o-n,0),s=this[c].slice(n,n+i),u=new l([],{type:arguments[2]});return u[c]=s,u}}function d(e,t,r){Error.call(this,e),this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}let h;Object.defineProperties(l.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(l.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="FetchError";try{h=require("encoding").convert}catch(e){}const p=Symbol("Body internals"),m=n.PassThrough;function y(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.size;let i=void 0===o?0:o;var s=r.timeout;let u=void 0===s?0:s;null==e?e=null:g(e)?e=Buffer.from(e.toString()):v(e)||Buffer.isBuffer(e)||("[object ArrayBuffer]"===Object.prototype.toString.call(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof n||(e=Buffer.from(String(e)))),this[p]={body:e,disturbed:!1,error:null},this.size=i,this.timeout=u,e instanceof n&&e.on("error",(function(e){const r="AbortError"===e.name?e:new d(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e);t[p].error=r}))}function b(){var e=this;if(this[p].disturbed)return y.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[p].disturbed=!0,this[p].error)return y.Promise.reject(this[p].error);let t=this.body;if(null===t)return y.Promise.resolve(Buffer.alloc(0));if(v(t)&&(t=t.stream()),Buffer.isBuffer(t))return y.Promise.resolve(t);if(!(t instanceof n))return y.Promise.resolve(Buffer.alloc(0));let r=[],o=0,i=!1;return new y.Promise((function(n,s){let u;e.timeout&&(u=setTimeout((function(){i=!0,s(new d(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))}),e.timeout)),t.on("error",(function(t){"AbortError"===t.name?(i=!0,s(t)):s(new d(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))})),t.on("data",(function(t){if(!i&&null!==t){if(e.size&&o+t.length>e.size)return i=!0,void s(new d(`content size at ${e.url} over limit: ${e.size}`,"max-size"));o+=t.length,r.push(t)}})),t.on("end",(function(){if(!i){clearTimeout(u);try{n(Buffer.concat(r,o))}catch(t){s(new d(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}}))}))}function g(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function v(e){return"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function w(e){let t,r,o=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return o instanceof n&&"function"!=typeof o.getBoundary&&(t=new m,r=new m,o.pipe(t),o.pipe(r),e[p].body=t,o=r),o}function O(e){return null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":g(e)?"application/x-www-form-urlencoded;charset=UTF-8":v(e)?e.type||null:Buffer.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||ArrayBuffer.isView(e)?null:"function"==typeof e.getBoundary?`multipart/form-data;boundary=${e.getBoundary()}`:e instanceof n?null:"text/plain;charset=UTF-8"}function $(e){const t=e.body;return null===t?0:v(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}y.prototype={get body(){return this[p].body},get bodyUsed(){return this[p].disturbed},arrayBuffer(){return b.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob(){let e=this.headers&&this.headers.get("content-type")||"";return b.call(this).then((function(t){return Object.assign(new l([],{type:e.toLowerCase()}),{[c]:t})}))},json(){var e=this;return b.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(t){return y.Promise.reject(new d(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}}))},text(){return b.call(this).then((function(e){return e.toString()}))},buffer(){return b.call(this)},textConverted(){var e=this;return b.call(this).then((function(t){return function(e,t){if("function"!=typeof h)throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=t.get("content-type");let n,o,i="utf-8";r&&(n=/charset=([^;]*)/i.exec(r));o=e.slice(0,1024).toString(),!n&&o&&(n=/<meta.+?charset=(['"])(.+?)\1/i.exec(o));!n&&o&&(n=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(o),n&&(n=/charset=(.*)/i.exec(n.pop())));!n&&o&&(n=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(o));n&&(i=n.pop(),"gb2312"!==i&&"gbk"!==i||(i="gb18030"));return h(e,"UTF-8",i).toString()}(t,e.headers)}))}},Object.defineProperties(y.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),y.mixIn=function(e){for(const t of Object.getOwnPropertyNames(y.prototype))if(!(t in e)){const r=Object.getOwnPropertyDescriptor(y.prototype,t);Object.defineProperty(e,t,r)}},y.Promise=global.Promise;const S=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,j=/[^\t\x20-\x7e\x80-\xff]/;function T(e){if(e=`${e}`,S.test(e)||""===e)throw new TypeError(`${e} is not a legal HTTP header name`)}function P(e){if(e=`${e}`,j.test(e))throw new TypeError(`${e} is not a legal HTTP header value`)}function C(e,t){t=t.toLowerCase();for(const r in e)if(r.toLowerCase()===t)return r}const D=Symbol("map");class x{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[D]=Object.create(null),e instanceof x){const t=e.raw(),r=Object.keys(t);for(const e of r)for(const r of t[e])this.append(e,r)}else if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const r=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");r.push(Array.from(t))}for(const e of r){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const r=e[t];this.append(t,r)}}}}get(e){T(e=`${e}`);const t=C(this[D],e);return void 0===t?null:this[D][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=M(this),n=0;for(;n<r.length;){var o=r[n];const i=o[0],s=o[1];e.call(t,s,i,this),r=M(this),n++}}set(e,t){t=`${t}`,T(e=`${e}`),P(t);const r=C(this[D],e);this[D][void 0!==r?r:e]=[t]}append(e,t){t=`${t}`,T(e=`${e}`),P(t);const r=C(this[D],e);void 0!==r?this[D][r].push(t):this[D][e]=[t]}has(e){return T(e=`${e}`),void 0!==C(this[D],e)}delete(e){T(e=`${e}`);const t=C(this[D],e);void 0!==t&&delete this[D][t]}raw(){return this[D]}keys(){return _(this,"key")}values(){return _(this,"value")}[Symbol.iterator](){return _(this,"key+value")}}function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";const r=Object.keys(e[D]).sort();return r.map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[D][t].join(", ")}:function(t){return[t.toLowerCase(),e[D][t].join(", ")]})}x.prototype.entries=x.prototype[Symbol.iterator],Object.defineProperty(x.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(x.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const E=Symbol("internal");function _(e,t){const r=Object.create(A);return r[E]={target:e,kind:t,index:0},r}const A=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==A)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[E];const t=e.target,r=e.kind,n=e.index,o=M(t,r);return n>=o.length?{value:void 0,done:!0}:(this[E].index=n+1,{value:o[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function B(e){const t=Object.assign({__proto__:null},e[D]),r=C(e[D],"Host");return void 0!==r&&(t[r]=t[r][0]),t}Object.defineProperty(A,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const R=Symbol("Response internals"),Y=o.STATUS_CODES;class L{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y.call(this,e,t);const r=t.status||200,n=new x(t.headers);if(null!=e&&!n.has("Content-Type")){const t=O(e);t&&n.append("Content-Type",t)}this[R]={url:t.url,status:r,statusText:t.statusText||Y[r],headers:n,counter:t.counter}}get url(){return this[R].url||""}get status(){return this[R].status}get ok(){return this[R].status>=200&&this[R].status<300}get redirected(){return this[R].counter>0}get statusText(){return this[R].statusText}get headers(){return this[R].headers}clone(){return new L(w(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}y.mixIn(L.prototype),Object.defineProperties(L.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(L.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const k=Symbol("Request internals"),H=i.parse,I=i.format,U="destroy"in n.Readable.prototype;function F(e){return"object"==typeof e&&"object"==typeof e[k]}class z{constructor(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};F(e)?t=H(e.url):(t=e&&e.href?H(e.href):H(`${e}`),e={});let n=r.method||e.method||"GET";if(n=n.toUpperCase(),(null!=r.body||F(e)&&null!==e.body)&&("GET"===n||"HEAD"===n))throw new TypeError("Request with GET/HEAD method cannot have body");let o=null!=r.body?r.body:F(e)&&null!==e.body?w(e):null;y.call(this,o,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const i=new x(r.headers||e.headers||{});if(null!=o&&!i.has("Content-Type")){const e=O(o);e&&i.append("Content-Type",e)}let s=F(e)?e.signal:null;if("signal"in r&&(s=r.signal),null!=s&&!function(e){const t=e&&"object"==typeof e&&Object.getPrototypeOf(e);return!(!t||"AbortSignal"!==t.constructor.name)}(s))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[k]={method:n,redirect:r.redirect||e.redirect||"follow",headers:i,parsedURL:t,signal:s},this.follow=void 0!==r.follow?r.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==r.compress?r.compress:void 0===e.compress||e.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[k].method}get url(){return I(this[k].parsedURL)}get headers(){return this[k].headers}get redirect(){return this[k].redirect}get signal(){return this[k].signal}clone(){return new z(this)}}function N(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor)}y.mixIn(z.prototype),Object.defineProperty(z.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(z.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),N.prototype=Object.create(Error.prototype),N.prototype.constructor=N,N.prototype.name="AbortError";const q=n.PassThrough,V=i.resolve;function Z(e,t){if(!Z.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return y.Promise=Z.Promise,new Z.Promise((function(r,i){const a=new z(e,t),c=function(e){const t=e[k].parsedURL,r=new x(e[k].headers);if(r.has("Accept")||r.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof n.Readable&&!U)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let o=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(o="0"),null!=e.body){const t=$(e);"number"==typeof t&&(o=String(t))}o&&r.set("Content-Length",o),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=e.agent;return"function"==typeof i&&(i=i(t)),r.has("Connection")||i||r.set("Connection","close"),Object.assign({},t,{method:e.method,headers:B(r),agent:i})}(a),f=("https:"===c.protocol?s:o).request,l=a.signal;let h=null;const p=function(){let e=new N("The user aborted a request.");i(e),a.body&&a.body instanceof n.Readable&&a.body.destroy(e),h&&h.body&&h.body.emit("error",e)};if(l&&l.aborted)return void p();const m=function(){p(),g()},y=f(c);let b;function g(){y.abort(),l&&l.removeEventListener("abort",m),clearTimeout(b)}l&&l.addEventListener("abort",m),a.timeout&&y.once("socket",(function(e){b=setTimeout((function(){i(new d(`network timeout at: ${a.url}`,"request-timeout")),g()}),a.timeout)})),y.on("error",(function(e){i(new d(`request to ${a.url} failed, reason: ${e.message}`,"system",e)),g()})),y.on("response",(function(e){clearTimeout(b);const t=function(e){const t=new x;for(const r of Object.keys(e))if(!S.test(r))if(Array.isArray(e[r]))for(const n of e[r])j.test(n)||(void 0===t[D][r]?t[D][r]=[n]:t[D][r].push(n));else j.test(e[r])||(t[D][r]=[e[r]]);return t}(e.headers);if(Z.isRedirect(e.statusCode)){const n=t.get("Location"),o=null===n?null:V(a.url,n);switch(a.redirect){case"error":return i(new d(`redirect mode is set to error: ${a.url}`,"no-redirect")),void g();case"manual":if(null!==o)try{t.set("Location",o)}catch(e){i(e)}break;case"follow":if(null===o)break;if(a.counter>=a.follow)return i(new d(`maximum redirect reached at: ${a.url}`,"max-redirect")),void g();const n={headers:new x(a.headers),follow:a.follow,counter:a.counter+1,agent:a.agent,compress:a.compress,method:a.method,body:a.body,signal:a.signal,timeout:a.timeout};return 303!==e.statusCode&&a.body&&null===$(a)?(i(new d("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void g()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==a.method)||(n.method="GET",n.body=void 0,n.headers.delete("content-length")),r(Z(new z(o,n))),void g())}}e.once("end",(function(){l&&l.removeEventListener("abort",m)}));let n=e.pipe(new q);const o={url:a.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:a.size,timeout:a.timeout,counter:a.counter},s=t.get("Content-Encoding");if(!a.compress||"HEAD"===a.method||null===s||204===e.statusCode||304===e.statusCode)return h=new L(n,o),void r(h);const c={flush:u.Z_SYNC_FLUSH,finishFlush:u.Z_SYNC_FLUSH};if("gzip"==s||"x-gzip"==s)return n=n.pipe(u.createGunzip(c)),h=new L(n,o),void r(h);if("deflate"!=s&&"x-deflate"!=s){if("br"==s&&"function"==typeof u.createBrotliDecompress)return n=n.pipe(u.createBrotliDecompress()),h=new L(n,o),void r(h);h=new L(n,o),r(h)}else{e.pipe(new q).once("data",(function(e){n=8==(15&e[0])?n.pipe(u.createInflate()):n.pipe(u.createInflateRaw()),h=new L(n,o),r(h)}))}})),function(e,t){const r=t.body;null===r?e.end():v(r)?r.stream().pipe(e):Buffer.isBuffer(r)?(e.write(r),e.end()):r.pipe(e)}(y,a)}))}Z.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},Z.Promise=global.Promise,t.default=Z},function(e,t){e.exports={spaceId:"INSERT_HERE_STUDIO_SPACE_ID",accessToken:"INSERT_HERE_ACCESS_TOKEN",secret:"e92bbf87b082bdd7a08067098e81b2567131010921658f31e6c8da499c4e331f"}},function(e,t){e.exports=require("http")},function(e,t,r){e.exports=function(){"use strict";var e="millisecond",t="second",r="minute",n="hour",o="day",i="week",s="month",u="quarter",a="year",c=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,f=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,l=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},d={s:l,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),o=r%60;return(t<=0?"+":"-")+l(n,2,"0")+":"+l(o,2,"0")},m:function(e,t){var r=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(r,s),o=t-n<0,i=e.clone().add(r+(o?-1:1),s);return Number(-(r+(t-n)/(o?n-i:i-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(c){return{M:s,y:a,w:i,d:o,D:"date",h:n,m:r,s:t,ms:e,Q:u}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p="en",m={};m[p]=h;var y=function(e){return e instanceof w},b=function(e,t,r){var n;if(!e)return p;if("string"==typeof e)m[e]&&(n=e),t&&(m[e]=t,n=e);else{var o=e.name;m[o]=e,n=o}return!r&&n&&(p=n),n||!r&&p},g=function(e,t,r){if(y(e))return e.clone();var n=t?"string"==typeof t?{format:t,pl:r}:t:{};return n.date=e,new w(n)},v=d;v.l=b,v.i=y,v.w=function(e,t){return g(e,{locale:t.$L,utc:t.$u,$offset:t.$offset})};var w=function(){function l(e){this.$L=this.$L||b(e.locale,null,!0),this.parse(e)}var d=l.prototype;return d.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(v.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(c);if(n)return r?new Date(Date.UTC(n[1],n[2]-1,n[3]||1,n[4]||0,n[5]||0,n[6]||0,n[7]||0)):new Date(n[1],n[2]-1,n[3]||1,n[4]||0,n[5]||0,n[6]||0,n[7]||0)}return new Date(t)}(e),this.init()},d.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},d.$utils=function(){return v},d.isValid=function(){return!("Invalid Date"===this.$d.toString())},d.isSame=function(e,t){var r=g(e);return this.startOf(t)<=r&&r<=this.endOf(t)},d.isAfter=function(e,t){return g(e)<this.startOf(t)},d.isBefore=function(e,t){return this.endOf(t)<g(e)},d.$g=function(e,t,r){return v.u(e)?this[t]:this.set(r,e)},d.year=function(e){return this.$g(e,"$y",a)},d.month=function(e){return this.$g(e,"$M",s)},d.day=function(e){return this.$g(e,"$W",o)},d.date=function(e){return this.$g(e,"$D","date")},d.hour=function(e){return this.$g(e,"$H",n)},d.minute=function(e){return this.$g(e,"$m",r)},d.second=function(e){return this.$g(e,"$s",t)},d.millisecond=function(t){return this.$g(t,"$ms",e)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(e,u){var c=this,f=!!v.u(u)||u,l=v.p(e),d=function(e,t){var r=v.w(c.$u?Date.UTC(c.$y,t,e):new Date(c.$y,t,e),c);return f?r:r.endOf(o)},h=function(e,t){return v.w(c.toDate()[e].apply(c.toDate(),(f?[0,0,0,0]:[23,59,59,999]).slice(t)),c)},p=this.$W,m=this.$M,y=this.$D,b="set"+(this.$u?"UTC":"");switch(l){case a:return f?d(1,0):d(31,11);case s:return f?d(1,m):d(0,m+1);case i:var g=this.$locale().weekStart||0,w=(p<g?p+7:p)-g;return d(f?y-w:y+(6-w),m);case o:case"date":return h(b+"Hours",0);case n:return h(b+"Minutes",1);case r:return h(b+"Seconds",2);case t:return h(b+"Milliseconds",3);default:return this.clone()}},d.endOf=function(e){return this.startOf(e,!1)},d.$set=function(i,u){var c,f=v.p(i),l="set"+(this.$u?"UTC":""),d=(c={},c[o]=l+"Date",c.date=l+"Date",c[s]=l+"Month",c[a]=l+"FullYear",c[n]=l+"Hours",c[r]=l+"Minutes",c[t]=l+"Seconds",c[e]=l+"Milliseconds",c)[f],h=f===o?this.$D+(u-this.$W):u;if(f===s||f===a){var p=this.clone().set("date",1);p.$d[d](h),p.init(),this.$d=p.set("date",Math.min(this.$D,p.daysInMonth())).toDate()}else d&&this.$d[d](h);return this.init(),this},d.set=function(e,t){return this.clone().$set(e,t)},d.get=function(e){return this[v.p(e)]()},d.add=function(e,u){var c,f=this;e=Number(e);var l=v.p(u),d=function(t){var r=g(f);return v.w(r.date(r.date()+Math.round(t*e)),f)};if(l===s)return this.set(s,this.$M+e);if(l===a)return this.set(a,this.$y+e);if(l===o)return d(1);if(l===i)return d(7);var h=(c={},c[r]=6e4,c[n]=36e5,c[t]=1e3,c)[l]||1,p=this.$d.getTime()+e*h;return v.w(p,this)},d.subtract=function(e,t){return this.add(-1*e,t)},d.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var r=e||"YYYY-MM-DDTHH:mm:ssZ",n=v.z(this),o=this.$locale(),i=this.$H,s=this.$m,u=this.$M,a=o.weekdays,c=o.months,l=function(e,n,o,i){return e&&(e[n]||e(t,r))||o[n].substr(0,i)},d=function(e){return v.s(i%12||12,e,"0")},h=o.meridiem||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:u+1,MM:v.s(u+1,2,"0"),MMM:l(o.monthsShort,u,c,3),MMMM:c[u]||c(this,r),D:this.$D,DD:v.s(this.$D,2,"0"),d:String(this.$W),dd:l(o.weekdaysMin,this.$W,a,2),ddd:l(o.weekdaysShort,this.$W,a,3),dddd:a[this.$W],H:String(i),HH:v.s(i,2,"0"),h:d(1),hh:d(2),a:h(i,s,!0),A:h(i,s,!1),m:String(s),mm:v.s(s,2,"0"),s:String(this.$s),ss:v.s(this.$s,2,"0"),SSS:v.s(this.$ms,3,"0"),Z:n};return r.replace(f,(function(e,t){return t||p[e]||n.replace(":","")}))},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(e,c,f){var l,d=v.p(c),h=g(e),p=6e4*(h.utcOffset()-this.utcOffset()),m=this-h,y=v.m(this,h);return y=(l={},l[a]=y/12,l[s]=y,l[u]=y/3,l[i]=(m-p)/6048e5,l[o]=(m-p)/864e5,l[n]=m/36e5,l[r]=m/6e4,l[t]=m/1e3,l)[d]||m,f?y:v.a(y)},d.daysInMonth=function(){return this.endOf(s).$D},d.$locale=function(){return m[this.$L]},d.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=b(e,t,!0);return n&&(r.$L=n),r},d.clone=function(){return v.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},l}();return g.prototype=w.prototype,g.extend=function(e,t){return e(t,w,g),g},g.locale=b,g.isDayjs=y,g.unix=function(e){return g(1e3*e)},g.en=m[p],g.Ls=m,g}()},function(e,t){e.exports=require("https")},function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const i=r(3),s=r(6),u=r(9),a=r(10),c=r(11),f=r(12),l=(r(13),r(14),r(4)),{secret:d}=l;console.log("before start"),t.handler=(e,t,r)=>{if(console.log("inside functions"),e.queryStringParameters.apiKey!==d)return void r(null,{statusCode:403,body:"You don't have access!"});const l=["Confirmed","Recovered","Deaths"],h=l.map(e=>i(`https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-${e}.csv`).then(e=>e.text()));console.log(l),Promise.all([...h,i("https://ncov.dxy.cn/ncovh5/view/pneumonia").then(e=>e.text())]).then(e=>{const[t,r,i]=e.slice(0,3).map(e=>u(e)),l=f(e[3]),[d,h]=t.columns.reduce((e,t,r)=>(r||(e=[[],[]]),"Invalid Date"===s(t).format("M/D/YYYY h:mm a")?e[1].push(t):e[0].push(t),e),[]),p=d.map(e=>s(e).format("M/D/YYYY h:mm a")),m=t.map(e=>Object.keys(e).reduce((t,r)=>{const n=h.includes(r),o=s(r).format("M/D/YYYY h:mm a");if("Invalid Date"!==o&&p.includes(o))t[o]=parseInt(e[r]);else{if(!n)return t;t[r]=e[r]}return t},{})),y=r.map(e=>Object.keys(e).reduce((t,r)=>{const n=h.includes(r),o=s(r).format("M/D/YYYY h:mm a");if("Invalid Date"!==o&&p.includes(o))t[o]=parseInt(e[r]);else{if(!n)return t;t[r]=e[r]}return t},{})),b=i.map(e=>Object.keys(e).reduce((t,r)=>{const n=h.includes(r),o=s(r).format("M/D/YYYY h:mm a");if("Invalid Date"!==o&&p.includes(o))t[o]=parseInt(e[r]);else{if(!n)return t;t[r]=e[r]}return t},{})),g=m.map(e=>{const t=a("",e,null,p),r=a("recoveries_",e,y,p),i=a("deaths_",e,b,p);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({provincestate:e["Province/State"],countryregion:e["Country/Region"],lat:e.first_recorded,long:e.lat,headers:p.join(";;")},t,{},r,{},i)});c(p,g,l).map(e=>{const t=Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{});return{type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(e.long),parseFloat(e.lat)]},properties:t}})})}},function(e,t,r){const n=r(15);e.exports=function(e){const t={2:'"first_recorded"',3:'"lat"',4:'"long"'},r=e.split("\n"),o=r[0].split(",").map((e,r)=>t[r]?t[r]:e).join(",")+"\n"+r.slice(1).join("\n");return n.csvParse(o)}},function(e,t){e.exports=function(e="",t,r,n){const o=r?r.find(e=>e["Province/State"]===t["Province/State"]&&e["Country/Region"]===t["Country/Region"]):t;return n.reduce((t,r)=>o[r]?(t[e+r]=parseInt(o[r]),t):t,{})}},function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const i=r(6);e.exports=function(e,t,r){const s=i(e[e.length-1]).format("M/D/YYYY"),u=e[e.length-1],a=i(r[0].updated).format("M/D/YYYY"),c=s===a;return t.map(e=>{const t="Mainland China"===e.countryregion||"Macau"===e.countryregion||"Hong Kong"===e.countryregion||"Taiwan"===e.countryregion,s=r.find(t=>t.provincestate===e.provincestate),f=i().subtract(i().utcOffset(),"minute").format("h:mm a"),l=c?u:a+` ${f}`,d=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{countryregion:t?"China":e.countryregion}),h=t?s.confirmed:e[u],p=t?s.recoveries:e["recoveries_"+u],m=t?s.deaths:e["deaths_"+u];return h&&(d[l]=h),p&&(d["recoveries_"+l]=p),m&&(d["deaths_"+l]=m),c||(d.headers=d.headers+`;;${l.toLowerCase()}`),d})}},function(e,t){function r(e){return{"辽宁省":"Liaoning","湖北省":"Hubei","江苏省":"Jiangsu","河南省":"Henan","福建省":"Fujian","海南省":"Hainan","山西省":"Shanxi","重庆市":"Chongqing","河北省":"Hebei","香港":"Hong Kong","湖南省":"Hunan","浙江省":"Zhejiang","山东省":"Shandong","内蒙古自治区":"Inner Mongolia","宁夏回族自治区":"Ningxia","贵州省":"Guizhou","广东省":"Guangdong","云南省":"Yunnan","四川省":"Sichuan","陕西省":"Shaanxi","黑龙江省":"Heilongjiang","上海市":"Shanghai","天津市":"Tianjin","安徽省":"Anhui","新疆维吾尔自治区":"Xinjiang","北京市":"Beijing","甘肃省":"Gansu","广西壮族自治区":"Guangxi","江西省":"Jiangxi","吉林省":"Jilin","台湾":"Taiwan","澳门":"Macau","青海省":"Qinghai","西藏自治区":"Tibet","待明确地区":""}[e]||"N/A"}e.exports=function(e){const t=e.split("try { window.getAreaStat = ")[1].split("}catch(e){}")[0];return JSON.parse(t).map(e=>({country:"China",provincestate:r(e.provinceName),confirmed:e.confirmedCount,recoveries:e.curedCount,deaths:e.deadCount,updated:(new Date).getTime()}))}},function(e,t,r){const n=r(3),o=r(4),{spaceId:i,accessToken:s}=o;e.exports=function(){return n(`https://xyz.api.here.com/hub/spaces/${i}/features?tags=*`,{method:"delete",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})}},function(e,t,r){const n=r(3),o=r(4),{spaceId:i,accessToken:s}=o;e.exports=function(e){return n(`https://xyz.api.here.com/hub/spaces/${i}/features`,{method:"put",body:JSON.stringify(e),headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/geo+json"}}).then(e=>e.json())}},function(e,t,r){"use strict";r.r(t);var n={},o={};function i(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function s(e){var t=Object.create(null),r=[];return e.forEach((function(e){for(var n in e)n in t||r.push(t[n]=n)})),r}function u(e,t){var r=e+"",n=r.length;return n<t?new Array(t-n+1).join(0)+r:r}function a(e){var t,r=e.getUTCHours(),n=e.getUTCMinutes(),o=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+u(-t,6):t>9999?"+"+u(t,6):u(t,4))+"-"+u(e.getUTCMonth()+1,2)+"-"+u(e.getUTCDate(),2)+(i?"T"+u(r,2)+":"+u(n,2)+":"+u(o,2)+"."+u(i,3)+"Z":o?"T"+u(r,2)+":"+u(n,2)+":"+u(o,2)+"Z":n||r?"T"+u(r,2)+":"+u(n,2)+"Z":"")}var c=function(e){var t=new RegExp('["'+e+"\n\r]"),r=e.charCodeAt(0);function u(e,t){var i,s=[],u=e.length,a=0,c=0,f=u<=0,l=!1;function d(){if(f)return o;if(l)return l=!1,n;var t,i,s=a;if(34===e.charCodeAt(s)){for(;a++<u&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=u?f=!0:10===(i=e.charCodeAt(a++))?l=!0:13===i&&(l=!0,10===e.charCodeAt(a)&&++a),e.slice(s+1,t-1).replace(/""/g,'"')}for(;a<u;){if(10===(i=e.charCodeAt(t=a++)))l=!0;else if(13===i)l=!0,10===e.charCodeAt(a)&&++a;else if(i!==r)continue;return e.slice(s,t)}return f=!0,e.slice(s,u)}for(10===e.charCodeAt(u-1)&&--u,13===e.charCodeAt(u-1)&&--u;(i=d())!==o;){for(var h=[];i!==n&&i!==o;)h.push(i),i=d();t&&null==(h=t(h,c++))||s.push(h)}return s}function c(t,r){return t.map((function(t){return r.map((function(e){return l(t[e])})).join(e)}))}function f(t){return t.map(l).join(e)}function l(e){return null==e?"":e instanceof Date?a(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var r,n,o=u(e,(function(e,o){if(r)return r(e,o-1);n=e,r=t?function(e,t){var r=i(e);return function(n,o){return t(r(n),o,e)}}(e,t):i(e)}));return o.columns=n||[],o},parseRows:u,format:function(t,r){return null==r&&(r=s(t)),[r.map(l).join(e)].concat(c(t,r)).join("\n")},formatBody:function(e,t){return null==t&&(t=s(e)),c(e,t).join("\n")},formatRows:function(e){return e.map(f).join("\n")},formatRow:f,formatValue:l}},f=c(","),l=f.parse,d=f.parseRows,h=f.format,p=f.formatBody,m=f.formatRows,y=f.formatRow,b=f.formatValue,g=c("\t"),v=g.parse,w=g.parseRows,O=g.format,$=g.formatBody,S=g.formatRows,j=g.formatRow,T=g.formatValue;function P(e){for(var t in e){var r,n,o=e[t].trim();if(o)if("true"===o)o=!0;else if("false"===o)o=!1;else if("NaN"===o)o=NaN;else if(isNaN(r=+o)){if(!(n=o.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;C&&n[4]&&!n[7]&&(o=o.replace(/-/g,"/").replace(/T/," ")),o=new Date(o)}else o=r;else o=null;e[t]=o}return e}var C=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();r.d(t,"dsvFormat",(function(){return c})),r.d(t,"csvParse",(function(){return l})),r.d(t,"csvParseRows",(function(){return d})),r.d(t,"csvFormat",(function(){return h})),r.d(t,"csvFormatBody",(function(){return p})),r.d(t,"csvFormatRows",(function(){return m})),r.d(t,"csvFormatRow",(function(){return y})),r.d(t,"csvFormatValue",(function(){return b})),r.d(t,"tsvParse",(function(){return v})),r.d(t,"tsvParseRows",(function(){return w})),r.d(t,"tsvFormat",(function(){return O})),r.d(t,"tsvFormatBody",(function(){return $})),r.d(t,"tsvFormatRows",(function(){return S})),r.d(t,"tsvFormatRow",(function(){return j})),r.d(t,"tsvFormatValue",(function(){return T})),r.d(t,"autoType",(function(){return P}))}]));